<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta_charset="utf-8">
    <title>病害虫調査</title>
    <link rel="stylesheet" type="text/css" href="style.css" >
    <style>
      body{font-size: large;  display: flex; flex-direction: row; 
           background-color: #ffeeee; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: start; }
           content{width: 100vw;height: 100vh;	}
           .s1{font-weight: bold; font-size: xx-large;}
    </style>
    <script>
      function OnPost(){

        const URL = "https://script.google.com/macros/s/AKfycbwpkrK9uFXvxf-6Nr5lDElbEb2g9HjqnqgLvCoxRlM8m2K8AMMK48bfrbKga03BVuq5/exec";

        let SendDATA = {
          "column_1" : document.getElementById("column_1").value,
          "column_2" : document.getElementById("column_2").value,
          "column_3" : document.getElementById("column_3").value,
          "column_4" : document.getElementById("column_4").value
        };
        let postparam = {
          "method" : "POST",
          "mode" : "no-cors",
          "Content-Type" : "application/x-www-form-urlencoded",
          "body" : JSON.stringify(SendDATA)
        };
        fetch(URL, postparam);
      }
      function OnGet(){

        const URL = "https://script.google.com/macros/s/AKfycbwpkrK9uFXvxf-6Nr5lDElbEb2g9HjqnqgLvCoxRlM8m2K8AMMK48bfrbKga03BVuq5/exec";

        fetch(URL)
        .then(response => {
          return response.json();
        })
        .then(data => {
          render_text = data.message;
          document.getElementById("get_value").innerHTML = render_text;
        })
        .catch(error => {
          document.getElementById("get_value").innerHTML = error;
        });
      }
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
    <script>
    $(function() {
      var prefs = [
        ['横浜市', 35.422175, 139.673702],
        ['川崎市', 35.49719, 139.753955],
        ['相模原市', 35.55588, 139.397116],
        ['横須賀市', 35.206801, 139.617916],
        ['平塚市', 35.320696, 139.370693],
        ['鎌倉市', 35.320847, 139.497922],
        ['藤沢市', 35.335188, 139.497169],
        ['小田原市', 35.248714, 139.12328],
        ['茅ヶ崎市', 35.328485, 139.375121],
        ['逗子市', 35.281544, 139.610675],
        ['三浦市', 35.172833, 139.628053],
        ['秦野市', 35.361692, 35.361692],
        ['厚木市', 35.415655, 139.352386],
        ['大和市', 35.507309, 139.4337],
        ['伊勢市', 35.42717, 139.246068],
        ['海老名市', 35.449496, 139.382276],
        ['座間市', 35.501027, 139.414615],

        ['新潟県', 37.55, 139.02],
        ['富山県', 36.41, 137.13],
        ['石川県', 36.33, 136.39],
        ['福井県', 36.03, 136.13],
        ['山梨県', 35.39, 138.34],
        ['長野県', 36.39, 138.11],
        ['岐阜県', 35.25, 136.45],
        ['静岡県', 34.58, 138.23],
        ['愛知県', 35.11, 136.54],
        ['三重県', 34.43, 136.30],
        ['滋賀県', 35.00, 135.52],
        ['京都府', 35.00, 135.46],
        ['大阪府', 34.41, 135.29],
        ['兵庫県', 34.41, 135.11],
        ['奈良県', 34.41, 135.48],
        ['和歌山県', 34.14, 135.10],
        ['鳥取県', 35.29, 134.13],
        ['島根県', 35.27, 133.04],
        ['岡山県', 34.39, 133.54],
        ['広島県', 34.23, 132.27],
        ['山口県', 34.11, 131.27],
        ['徳島県', 34.03, 134.32],
        ['香川県', 34.20, 134.02],
        ['愛媛県', 33.50, 132.44],
        ['高知県', 33.33, 133.31],
        ['福岡県', 33.35, 130.23],
        ['佐賀県', 33.16, 130.16],
        ['長崎県', 32.45, 129.52],
        ['熊本県', 32.48, 130.42],
        ['大分県', 33.14, 131.37],
        ['宮崎県', 31.56, 131.25],
        ['鹿児島県', 31.36, 130.33],
        ['沖縄県', 26.13, 127.41]
      ];

      navigator.geolocation.getCurrentPosition(function(pos) {
        var lat = pos.coords.latitude;
        var long = pos.coords.longitude;
        $.each(prefs, function(i, p) {
          p[3] = (lat - p[1]) * (lat - p[1]) + (long - p[2]) * (long - p[2]);
        });
        prefs.sort(function(p1, p2) {
          return p1[3] - p2[3];
        });
        $.each(prefs, function(i, p) {
          $('<option></option>').html(p[0]).appendTo('#column_4');
        });
      });
    });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css" rel="stylesheet">
  </head>
  <body>
    <div class="content">
    <div id="left">
      <h1>病害虫調査</h1>
      <p class="s1">・病害虫を運ぶ鳥や虫<br>　※すべてカタカナ回答</p><select class="chosen-select" id="column_1">
        <option value="">入力してください</option>
        <option value="アリ">アリ</option>
        <option value="カタツムリ">カタツムリ</option>
        <option value="タカラダニ">タカラダニ</option>
        <option value="ゴキブリ">ゴキブリ</option>
        <option value="バッタ">バッタ</option>
        <option value="毛虫">ケムシ</option>
        <option value="スズメ">スズメ</option>
        <option value="ツバメ">ツバメ</option>
        <option value="カラス">カラス</option>
        <option value="ハト">ハト</option>
        <option value="カモメ">カモメ</option>
        <option value="ムクドリ">ムクドリ</option>
        <option value="コウモリ">コウモリ</option>
        <option value="犬">イヌ</option>
        <option value="猫">ネコ</option>
        <option value="ウサギ">ウサギ</option>
        <option value="その他">その他</option>
      </select><br>  <script>
          $('.chosen-select').chosen();
        </script>
      <p class="s1">・備考(任意)</p>
      <textarea name="a" id="column_2" rows="2"></textarea><br>
      <p class="s1">・電話番号(任意)</p>
      <input type="tel" inputmode="tel" style="height: 25px;" placeholder="080-1234-5678" id="column_3"><br>
      <p class="s1">・位置情報<br>　※正しくない場合は以下からお選びください。</p>
      <select id="column_4" style="width: 120px; height: 25px;"></select>
      <br><br>
        <button style="margin-top: 30px;"  onclick="OnPost();">送信</button>
      </div>
    </div>

  </body>
</html>
